name: r2dock
version: "debug"
author: Téo Haÿs <teo.hays@inria.fr>
about: Deploys Docker containers using Rhubarbe
settings :
    - ArgRequiredElseHelp
subcommands:
    - deploy:
        settings:
            - AllowLeadingHyphen
            - TrailingVarArg
        about: deploys the selected container on nodes
        args:
            # - verbose:
            #     short: v
            #     long: verbose
            #     help: print debug information
            - image:
                short: i
                long: image
                value_name: image
                takes_value: true
                required: true
                help: the image to deploy, <repository>/image:tag format
            - command:
                short: c
                long: command
                takes_value: true
                help: the command you want to run in the container. This supersedes the default one.
            - options:
                short: o
                long: options
                multiple: true
                takes_value: true
                last: true
                help: the options string that you want to send to the container.
            # - yaml:
            #     short: y
            #     long: yaml
            #     takes_value: true
            #     help: the YAML file that you want to use to deploy your docker configuration
            - nodes:
                short: n
                long: nodes
                takes_value: true
                help: nodes you want to deploy the container on
                required: true
            - bypass-check:
                short: B
                long: bypass-check
                help: bypass the check to see if the nodes are running the required Docker-ready image

    - destroy:
        about: destroys containers or images PERMANENTLY
        args:
            # - verbose:
            #     short: v
            #     long: verbose
            #     help: print debug information
            - yes:
                short: y
                long: yes
                help: doesn't ask if you really want to destroy the container
            - image:
                short: i
                long: image
                value_name: image
                takes_value: true
                help: the image to destroy PERMANENTLY
            - nodes:
                short: n
                long: nodes
                takes_value: true
                help: nodes you want to destroy
                required: true
    - list:
        about: lists the CUSTOM images to deploy. Images on Dockerhub are NOT listed
        args:
            - details:
                long: details
                short: d
                takes_value: true
                help: name of the image for which you want to display all the different versions available
    - save:
        about: saves the selected container as an image for future use
        args: 
            - name:
                long: name
                takes_value: true
                required: true
                help: name of the image you wish to create
            - node: 
                long: node
                short: n
                takes_value: true
                required: true
            #     help: identifier of the node you want to save
            # - verbose:
            #     short: v
            #     help: print debug information