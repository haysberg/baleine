name: r2dock
author: Téo Haÿs <teo.hays@inria.fr>
about: Deploys Docker containers using Rhubarbe
settings :
    - ArgRequiredElseHelp
subcommands:
    - deploy:
        settings:
            - AllowLeadingHyphen
            - TrailingVarArg
        about: deploys the selected container on nodes
        args:
            - image:
                short: i
                long: image
                value_name: image
                takes_value: true
                required: true
                help: the image to deploy, <repository>/image:tag format
            - command:
                short: c
                long: command
                takes_value: true
                multiple: true
                help: the command you want to run in the container. This supersedes the default one.
            - options:
                short: o
                long: options
                multiple: true
                takes_value: true
                help: the options string that you want to send to the container.
            - nodes:
                short: n
                long: nodes
                takes_value: true
                help: nodes you want to deploy the container on
                required: true
            - bypass-check:
                short: B
                long: bypass-check
                help: bypass the check to see if the nodes are running the required Docker-ready image
            - bootstrap:
                long: bootstrap
                help: deploys the latest r2dock compatible image on the machine before deploying the container
                default_value: r2dock

    - destroy:
        about: destroys containers or images PERMANENTLY
        args:
            - yes:
                short: y
                long: yes
                help: doesn't ask if you really want to destroy the container
            - image:
                short: i
                long: image
                value_name: image
                takes_value: true
                help: the image to destroy PERMANENTLY
            - nodes:
                short: n
                long: nodes
                takes_value: true
                help: nodes you want to destroy
                required: true
    - list:
        about: lists the CUSTOM images to deploy. Images on Dockerhub are NOT listed
        args:
            - details:
                long: details
                short: d
                takes_value: true
                help: name of the image for which you want to display all the different versions available
    - save:
        about: saves the selected container as an image for future use
        args: 
            - name:
                long: name
                takes_value: true
                required: true
                help: name of the image you wish to create
            - node: 
                long: node
                short: n
                takes_value: true
                required: true
                help: identifier of the node you want to save